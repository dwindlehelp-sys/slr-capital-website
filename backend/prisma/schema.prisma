// This is your Prisma schema file.
// It's the single source of truth for your application's database models.

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider     = "postgresql"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

// Model for dynamic stats on the home page.
model HomePageStat {
  id            Int    @id @default(autoincrement())
  loanDisbursed String
}

// Model for storing partner bank information.
model Partner {
  id       Int    @id @default(autoincrement())
  bankName String
  logoUrl  String
}

// Model for job openings posted by the admin.
model JobOpening {
  id             Int      @id @default(autoincrement())
  roleTitle      String
  openingsCount  Int
  jobDescription String
  isActive       Boolean  @default(true)
  applications   JobApplication[]
}

// Model for storing applications submitted by users for a job.
model JobApplication {
  id             Int      @id @default(autoincrement())
  applicantName  String
  applicantEmail String
  applicantPhone String
  resumeUrl      String
  appliedAt      DateTime @default(now())

  // This line is the most important part
  job   JobOpening @relation(fields: [jobId], references: [id], onDelete: Cascade)
  jobId Int
}

// Model for storing leads generated from the services forms.
model ServiceLead {
  id               Int      @id @default(autoincrement())
  name             String
  phone            String
  email            String
  serviceRequested String
  submittedAt      DateTime @default(now())
}

// Model for the admin user(s).
model Admin {
  id       Int    @id @default(autoincrement())
  username String @unique
  password String
}